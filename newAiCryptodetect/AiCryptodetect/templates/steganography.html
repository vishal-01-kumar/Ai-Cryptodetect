<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steganography - AI CryptoDetect</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00d4ff;
            --primary-dark: #0099cc;
            --secondary: #ff6b6b;
            --accent: #4ecdc4;
            --warning: #ffe66d;
            --success: #06ffa5;
            --error: #ff4757;
            --bg-primary: #0a0a0f;
            --bg-secondary: #1a1a24;
            --bg-tertiary: #2a2a3a;
            --bg-glass: rgba(255, 255, 255, 0.05);
            --bg-glass-strong: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: #b4b4b4;
            --text-muted: #666666;
            --border-glass: rgba(255, 255, 255, 0.1);
            --shadow-glow: 0 0 30px rgba(0, 212, 255, 0.3);
            --shadow-strong: 0 20px 40px rgba(0, 0, 0, 0.6);
            --gradient-primary: linear-gradient(135deg, #00d4ff 0%, #4ecdc4 100%);
            --gradient-secondary: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            --gradient-bg: linear-gradient(135deg, #0a0a0f 0%, #1a1a24 100%);
            --gradient-card: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
            --gradient-stego: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
        }

        /* Light theme variables */
        body.light-theme {
            --primary: #0099cc;
            --primary-dark: #007acc;
            --secondary: #e74c3c;
            --accent: #2ecc71;
            --warning: #f39c12;
            --success: #27ae60;
            --error: #e74c3c;
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e9ecef;
            --bg-glass: rgba(0, 0, 0, 0.05);
            --bg-glass-strong: rgba(0, 0, 0, 0.1);
            --text-primary: #2c3e50;
            --text-secondary: #6c757d;
            --text-muted: #adb5bd;
            --border-glass: rgba(0, 0, 0, 0.1);
            --shadow-glow: 0 0 30px rgba(0, 153, 204, 0.3);
            --shadow-strong: 0 20px 40px rgba(0, 0, 0, 0.1);
            --gradient-primary: linear-gradient(135deg, #0099cc 0%, #2ecc71 100%);
            --gradient-secondary: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            --gradient-bg: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            --gradient-card: linear-gradient(135deg, rgba(0,0,0,0.02) 0%, rgba(0,0,0,0.05) 100%);
            --gradient-stego: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--gradient-bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 15, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-glass);
            z-index: 1000;
            padding: 1rem 0;
            transition: all 0.3s ease;
        }

        body.light-theme .header {
            background: rgba(248, 249, 250, 0.8);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-stego);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-stego);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
            margin-right: auto;
            margin-left: 2rem;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-link:hover {
            color: #9b59b6;
        }

        .nav-link.active {
            color: #9b59b6;
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-stego);
        }

        .nav-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .theme-toggle {
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            color: var(--text-primary);
            padding: 0.75rem 1.25rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            position: relative;
            overflow: hidden;
            min-width: 120px;
            justify-content: center;
        }

        .theme-toggle:hover {
            background: var(--bg-glass-strong);
            box-shadow: var(--shadow-glow), 0 0 30px rgba(155, 89, 182, 0.4);
            transform: translateY(-3px) scale(1.05);
            border-color: #9b59b6;
        }

        .ai-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--bg-glass);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            border: 1px solid var(--border-glass);
            font-size: 0.875rem;
        }

        .ai-indicator {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); }
        }

        /* Main Content */
        .main-container {
            margin-top: 80px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 2rem;
        }

        .hero {
            text-align: center;
            padding: 4rem 0;
            position: relative;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 800px;
            height: 800px;
            background: radial-gradient(circle, rgba(155, 89, 182, 0.1) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            z-index: -1;
        }

        .hero-title {
            font-size: clamp(3rem, 8vw, 5rem);
            font-weight: 700;
            margin-bottom: 1.5rem;
            background: var(--gradient-stego);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 3s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 20px rgba(155, 89, 182, 0.3)); }
            to { filter: drop-shadow(0 0 40px rgba(155, 89, 182, 0.6)); }
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto 2rem;
            font-weight: 300;
        }

        /* Media Type Tabs */
        .media-tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            background: var(--bg-glass);
            padding: 0.5rem;
            border-radius: 50px;
            border: 1px solid var(--border-glass);
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        .media-tab {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .media-tab:hover {
            color: var(--text-primary);
            background: var(--bg-glass-strong);
        }

        .media-tab.active {
            background: var(--gradient-stego);
            color: white;
            box-shadow: 0 0 20px rgba(155, 89, 182, 0.3);
        }

        .hero-features {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
        }

        .feature-badge {
            background: var(--bg-glass);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            border: 1px solid var(--border-glass);
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: blur(10px);
        }

        /* Smart Interface */
        .smart-interface {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .interface-card {
            background: var(--gradient-card);
            border: 1px solid var(--border-glass);
            border-radius: 24px;
            padding: 2rem;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .interface-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-stego);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .interface-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-strong);
            border-color: #9b59b6;
        }

        .interface-card:hover::before {
            opacity: 1;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .embed-card .card-icon {
            background: var(--gradient-stego);
        }

        .extract-card .card-icon {
            background: var(--gradient-stego);
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .card-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Upload zones */
        .smart-upload {
            border: 2px dashed var(--border-glass);
            border-radius: 16px;
            padding: 3rem 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            background: rgba(155, 89, 182, 0.02);
        }

        .smart-upload:hover,
        .smart-upload.drag-over {
            border-color: #9b59b6;
            background: rgba(155, 89, 182, 0.08);
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 3rem;
            color: #9b59b6;
            margin-bottom: 1rem;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .upload-text {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .upload-subtext {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .message-input {
            width: 100%;
            min-height: 150px;
            padding: 1rem;
            border: 1px solid var(--border-glass);
            border-radius: 12px;
            background: var(--bg-glass);
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            resize: vertical;
            margin-top: 1rem;
        }

        .message-input:focus {
            outline: none;
            border-color: #9b59b6;
            box-shadow: 0 0 0 3px rgba(155, 89, 182, 0.1);
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .action-btn {
            flex: 1;
            padding: 1rem;
            border-radius: 12px;
            border: none;
            background: var(--gradient-stego);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(155, 89, 182, 0.4);
        }

        .secondary-btn {
            background: var(--bg-glass);
            color: var(--text-primary);
            border: 1px solid var(--border-glass);
        }

        .secondary-btn:hover {
            background: var(--bg-glass-strong);
            box-shadow: var(--shadow-glow);
        }

        /* Results */
        .results-container {
            background: var(--gradient-card);
            border: 1px solid var(--border-glass);
            border-radius: 24px;
            padding: 2rem;
            backdrop-filter: blur(20px);
            margin-top: 2rem;
            display: none;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .results-title {
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .results-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-stego);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .download-btn {
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            color: var(--text-primary);
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .download-btn:hover {
            background: var(--bg-glass-strong);
            transform: translateY(-2px);
        }

        .preview-image {
            max-width: 100%;
            max-height: 400px;
            border-radius: 12px;
            margin: 1rem 0;
        }

        .extracted-message {
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            border-radius: 12px;
            padding: 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            white-space: pre-wrap;
            word-break: break-word;
        }

        /* Loading overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 15, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            backdrop-filter: blur(10px);
        }

        body.light-theme .loading-overlay {
            background: rgba(248, 249, 250, 0.8);
        }

        .loading-content {
            text-align: center;
            background: var(--gradient-card);
            padding: 3rem;
            border-radius: 24px;
            border: 1px solid var(--border-glass);
            backdrop-filter: blur(20px);
        }

        .loading-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            background: var(--gradient-stego);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            animation: stegoSpin 1.5s ease-in-out infinite;
        }

        @keyframes stegoSpin {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }

        .loading-text {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .loading-subtext {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .smart-interface {
                grid-template-columns: 1fr;
            }
            
            .main-container {
                padding: 1rem;
            }
            
            .interface-card {
                padding: 1.5rem;
            }

            .nav-links {
                display: none;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.8s ease-out;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-in-right {
            animation: slideInRight 0.8s ease-out;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-eye-slash"></i>
                </div>
                <span>AI CryptoDetect</span>
            </div>
            
            <div class="nav-links">
                <a href="/" class="nav-link">Home</a>
                <a href="/encrypt" class="nav-link">File Encryption</a>
                <a href="/compare" class="nav-link">Compare Algorithms</a>
                <a href="/steganography" class="nav-link active">Steganography</a>
                <a href="/file-converter" class="nav-link">File Converter</a>
            </div>
            
            <div class="nav-controls">
                <div class="ai-status">
                    <div class="ai-indicator"></div>
                    <span>AI Online</span>
                </div>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                    <span>Dark Mode</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="main-container">
        <!-- Hero Section -->
        <section class="hero fade-in-up">
            <h1 class="hero-title">Steganography</h1>
            <p class="hero-subtitle">Hide secret messages within images and audio files using advanced steganographic techniques. Whether you're embedding data in images with LSB encoding or hiding messages in audio with precision bit manipulation, our tool ensures your secrets remain undetectable.</p>
            
            <!-- Media Type Tabs -->
            <div class="media-tabs">
                <button class="media-tab active" data-media="image">
                    <i class="fas fa-image"></i>
                    <span>Image</span>
                </button>
                <button class="media-tab" data-media="audio">
                    <i class="fas fa-volume-up"></i>
                    <span>Audio</span>
                </button>
            </div>
            
            <div class="hero-features">
                <div class="feature-badge">
                    <i class="fas fa-eye-slash"></i>
                    <span>Invisible Embedding</span>
                </div>
                <div class="feature-badge">
                    <i class="fas fa-search"></i>
                    <span>Message Extraction</span>
                </div>
                <div class="feature-badge">
                    <i class="fas fa-layer-group"></i>
                    <span>Multiple Formats</span>
                </div>
            </div>
        </section>

        <!-- Image Steganography Interface -->
        <section class="smart-interface" id="imageInterface">
            <!-- Embed Message Card -->
            <div class="interface-card embed-card fade-in-up">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <div>
                        <h3 class="card-title">Embed Message</h3>
                        <p class="card-description">Hide your secret message within an image</p>
                    </div>
                </div>

                <div class="smart-upload" id="embedUploadZone">
                    <div class="upload-icon">
                        <i class="fas fa-image"></i>
                    </div>
                    <div class="upload-text">Select cover image</div>
                    <div class="upload-subtext">PNG, JPG, JPEG supported</div>
                    <input type="file" id="embedImageInput" accept="image/png,image/jpeg,image/jpg" style="display: none;">
                </div>

                <textarea class="message-input" id="secretMessage" placeholder="Enter your secret message here..."></textarea>

                <div class="action-buttons">
                    <button class="action-btn secondary-btn" id="clearEmbedBtn">
                        <i class="fas fa-trash"></i>
                        <span>Clear</span>
                    </button>
                    <button class="action-btn" id="embedBtn">
                        <i class="fas fa-plus"></i>
                        <span>Embed Message</span>
                    </button>
                </div>
            </div>

            <!-- Extract Message Card -->
            <div class="interface-card extract-card slide-in-right">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <div>
                        <h3 class="card-title">Extract Message</h3>
                        <p class="card-description">Extract hidden messages from stego images</p>
                    </div>
                </div>

                <div class="smart-upload" id="extractUploadZone">
                    <div class="upload-icon">
                        <i class="fas fa-file-image"></i>
                    </div>
                    <div class="upload-text">Select stego image</div>
                    <div class="upload-subtext">PNG, JPG, JPEG with hidden messages</div>
                    <input type="file" id="extractImageInput" accept="image/png,image/jpeg,image/jpg" style="display: none;">
                </div>

                <div class="action-buttons">
                    <button class="action-btn secondary-btn" id="clearExtractBtn">
                        <i class="fas fa-trash"></i>
                        <span>Clear</span>
                    </button>
                    <button class="action-btn" id="extractBtn">
                        <i class="fas fa-search"></i>
                        <span>Extract Message</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Audio Steganography Interface -->
        <section class="smart-interface" id="audioInterface" style="display: none;">
            <!-- Embed Audio Message Card -->
            <div class="interface-card embed-card fade-in-up">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <div>
                        <h3 class="card-title">Embed Message</h3>
                        <p class="card-description">Hide your secret message within an audio file</p>
                    </div>
                </div>

                <div class="smart-upload" id="embedAudioUploadZone">
                    <div class="upload-icon">
                        <i class="fas fa-volume-up"></i>
                    </div>
                    <div class="upload-text">Select cover audio</div>
                    <div class="upload-subtext">WAV, MP3, M4A, FLAC, OGG supported</div>
                    <input type="file" id="embedAudioInput" accept="audio/wav,audio/mp3,audio/mpeg,audio/m4a,audio/flac,audio/ogg" style="display: none;">
                </div>

                <textarea class="message-input" id="secretAudioMessage" placeholder="Enter your secret message here..."></textarea>

                <div class="action-buttons">
                    <button class="action-btn secondary-btn" id="clearEmbedAudioBtn">
                        <i class="fas fa-trash"></i>
                        <span>Clear</span>
                    </button>
                    <button class="action-btn" id="embedAudioBtn">
                        <i class="fas fa-plus"></i>
                        <span>Embed Message</span>
                    </button>
                </div>
            </div>

            <!-- Extract Audio Message Card -->
            <div class="interface-card extract-card slide-in-right">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <div>
                        <h3 class="card-title">Extract Message</h3>
                        <p class="card-description">Extract hidden messages from stego audio files</p>
                    </div>
                </div>

                <div class="smart-upload" id="extractAudioUploadZone">
                    <div class="upload-icon">
                        <i class="fas fa-file-audio"></i>
                    </div>
                    <div class="upload-text">Select stego audio</div>
                    <div class="upload-subtext">WAV, MP3, M4A, FLAC, OGG with hidden messages</div>
                    <input type="file" id="extractAudioInput" accept="audio/wav,audio/mp3,audio/mpeg,audio/m4a,audio/flac,audio/ogg" style="display: none;">
                </div>

                <div class="action-buttons">
                    <button class="action-btn secondary-btn" id="clearExtractAudioBtn">
                        <i class="fas fa-trash"></i>
                        <span>Clear</span>
                    </button>
                    <button class="action-btn" id="extractAudioBtn">
                        <i class="fas fa-search"></i>
                        <span>Extract Message</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Results Container -->
        <div class="results-container" id="resultsContainer">
            <div class="results-header">
                <div class="results-title">
                    <div class="results-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <span id="resultsTitle">Processing Complete</span>
                </div>
                <button class="download-btn" id="downloadBtn">
                    <i class="fas fa-download"></i>
                    <span>Download</span>
                </button>
            </div>

            <div id="resultsContent">
                <!-- Results will be populated here -->
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-icon">
                <i class="fas fa-eye-slash"></i>
            </div>
            <div class="loading-text" id="loadingText">Processing Image</div>
            <div class="loading-subtext" id="loadingSubtext">Embedding your secret message...</div>
        </div>
    </div>

    <script>
        // Theme toggle functionality
        document.addEventListener('DOMContentLoaded', () => {
            initializeThemeToggle();
            initializeSteganography();
        });

        function initializeThemeToggle() {
            const themeToggle = document.getElementById('themeToggle');
            const savedTheme = localStorage.getItem('theme') || 'dark';
            
            applyTheme(savedTheme);
            
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.body.classList.contains('light-theme') ? 'light' : 'dark';
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                applyTheme(newTheme);
                localStorage.setItem('theme', newTheme);
            });
            
            function applyTheme(theme) {
                const icon = themeToggle.querySelector('i');
                const text = themeToggle.querySelector('span');
                
                if (theme === 'light') {
                    document.body.classList.add('light-theme');
                    icon.className = 'fas fa-sun';
                    text.textContent = 'Light Mode';
                } else {
                    document.body.classList.remove('light-theme');
                    icon.className = 'fas fa-moon';
                    text.textContent = 'Dark Mode';
                }
            }
        }

        function initializeSteganography() {
            // Media tabs
            const mediaTabs = document.querySelectorAll('.media-tab');
            const imageInterface = document.getElementById('imageInterface');
            const audioInterface = document.getElementById('audioInterface');
            
            // Image elements
            const embedUploadZone = document.getElementById('embedUploadZone');
            const embedImageInput = document.getElementById('embedImageInput');
            const extractUploadZone = document.getElementById('extractUploadZone');
            const extractImageInput = document.getElementById('extractImageInput');
            const secretMessage = document.getElementById('secretMessage');
            const embedBtn = document.getElementById('embedBtn');
            const extractBtn = document.getElementById('extractBtn');
            const clearEmbedBtn = document.getElementById('clearEmbedBtn');
            const clearExtractBtn = document.getElementById('clearExtractBtn');
            
            // Audio elements
            const embedAudioUploadZone = document.getElementById('embedAudioUploadZone');
            const embedAudioInput = document.getElementById('embedAudioInput');
            const extractAudioUploadZone = document.getElementById('extractAudioUploadZone');
            const extractAudioInput = document.getElementById('extractAudioInput');
            const secretAudioMessage = document.getElementById('secretAudioMessage');
            const embedAudioBtn = document.getElementById('embedAudioBtn');
            const extractAudioBtn = document.getElementById('extractAudioBtn');
            const clearEmbedAudioBtn = document.getElementById('clearEmbedAudioBtn');
            const clearExtractAudioBtn = document.getElementById('clearExtractAudioBtn');
            
            const loadingOverlay = document.getElementById('loadingOverlay');
            const resultsContainer = document.getElementById('resultsContainer');

            let embedImage = null;
            let extractImage = null;
            let embedAudio = null;
            let extractAudio = null;
            let currentMedia = 'image';
            
            // Initialize media tabs
            mediaTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const mediaType = tab.getAttribute('data-media');
                    switchMediaType(mediaType);
                });
            });
            
            function switchMediaType(mediaType) {
                currentMedia = mediaType;
                
                // Update active tab
                mediaTabs.forEach(tab => {
                    tab.classList.toggle('active', tab.getAttribute('data-media') === mediaType);
                });
                
                // Switch interfaces
                if (mediaType === 'image') {
                    imageInterface.style.display = 'grid';
                    audioInterface.style.display = 'none';
                } else {
                    imageInterface.style.display = 'none';
                    audioInterface.style.display = 'grid';
                }
                
                // Hide results when switching
                resultsContainer.style.display = 'none';
            }

            // Upload zone events - Image
            embedUploadZone.addEventListener('click', () => embedImageInput.click());
            extractUploadZone.addEventListener('click', () => extractImageInput.click());
            
            // Upload zone events - Audio
            embedAudioUploadZone.addEventListener('click', () => embedAudioInput.click());
            extractAudioUploadZone.addEventListener('click', () => extractAudioInput.click());

            // File input events
            embedImageInput.addEventListener('change', (e) => {
                if (e.target.files[0]) {
                    embedImage = e.target.files[0];
                    updateUploadZone(embedUploadZone, embedImage);
                }
            });

            extractImageInput.addEventListener('change', (e) => {
                if (e.target.files[0]) {
                    extractImage = e.target.files[0];
                    updateUploadZone(extractUploadZone, extractImage);
                }
            });
            
            // Audio file input events
            embedAudioInput.addEventListener('change', (e) => {
                if (e.target.files[0]) {
                    embedAudio = e.target.files[0];
                    updateAudioUploadZone(embedAudioUploadZone, embedAudio);
                }
            });
            
            extractAudioInput.addEventListener('change', (e) => {
                if (e.target.files[0]) {
                    extractAudio = e.target.files[0];
                    updateAudioUploadZone(extractAudioUploadZone, extractAudio);
                }
            });

            // Action buttons
            embedBtn.addEventListener('click', () => {
                if (!embedImage) {
                    alert('Please select an image first');
                    return;
                }
                if (!secretMessage.value.trim()) {
                    alert('Please enter a secret message');
                    return;
                }
                processEmbedding();
            });

            extractBtn.addEventListener('click', () => {
                if (!extractImage) {
                    alert('Please select a stego image first');
                    return;
                }
                processExtraction();
            });

            clearEmbedBtn.addEventListener('click', () => {
                embedImage = null;
                secretMessage.value = '';
                resetUploadZone(embedUploadZone, 'Select cover image', 'PNG, JPG, JPEG supported');
                embedImageInput.value = '';
            });

            clearExtractBtn.addEventListener('click', () => {
                extractImage = null;
                resetUploadZone(extractUploadZone, 'Select stego image', 'PNG, JPG, JPEG with hidden messages');
                extractImageInput.value = '';
            });
            
            // Audio action buttons
            embedAudioBtn.addEventListener('click', () => {
                if (!embedAudio) {
                    alert('Please select an audio file first');
                    return;
                }
                if (!secretAudioMessage.value.trim()) {
                    alert('Please enter a secret message');
                    return;
                }
                processAudioEmbedding();
            });

            extractAudioBtn.addEventListener('click', () => {
                if (!extractAudio) {
                    alert('Please select a stego audio file first');
                    return;
                }
                processAudioExtraction();
            });

            clearEmbedAudioBtn.addEventListener('click', () => {
                embedAudio = null;
                secretAudioMessage.value = '';
                resetAudioUploadZone(embedAudioUploadZone, 'Select cover audio', 'WAV, MP3 supported');
                embedAudioInput.value = '';
            });

            clearExtractAudioBtn.addEventListener('click', () => {
                extractAudio = null;
                resetAudioUploadZone(extractAudioUploadZone, 'Select stego audio', 'WAV, MP3 with hidden messages');
                extractAudioInput.value = '';
            });

            function updateUploadZone(zone, file) {
                const text = zone.querySelector('.upload-text');
                const subtext = zone.querySelector('.upload-subtext');
                const icon = zone.querySelector('.upload-icon i');
                
                text.textContent = file.name;
                subtext.textContent = `${(file.size / 1024).toFixed(1)} KB`;
                icon.className = 'fas fa-check-circle';
                zone.style.borderColor = '#9b59b6';
                zone.style.background = 'rgba(155, 89, 182, 0.1)';
            }

            function resetUploadZone(zone, textContent, subtextContent) {
                const text = zone.querySelector('.upload-text');
                const subtext = zone.querySelector('.upload-subtext');
                const icon = zone.querySelector('.upload-icon i');
                
                text.textContent = textContent;
                subtext.textContent = subtextContent;
                icon.className = zone.id === 'embedUploadZone' ? 'fas fa-image' : 'fas fa-file-image';
                zone.style.borderColor = '';
                zone.style.background = '';
            }

            function processEmbedding() {
                showLoading('Embedding Message', 'Processing your image and hiding the secret message...');
                
                const formData = new FormData();
                formData.append('image', embedImage);
                formData.append('message', secretMessage.value);
                
                fetch('/embed_message', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    hideLoading();
                    if (data.success) {
                        showResults({
                            type: 'embed',
                            originalImage: embedImage,
                            message: secretMessage.value,
                            success: true,
                            stegoImage: data.stego_image,
                            filename: data.filename,
                            originalSize: data.original_size,
                            messageLength: data.message_length,
                            capacityUsed: data.capacity_used,
                            encodingMethod: data.encoding_method
                        });
                    } else {
                        alert('Error: ' + (data.error || 'Failed to embed message'));
                    }
                })
                .catch(error => {
                    hideLoading();
                    console.error('Error:', error);
                    alert('Error: Failed to embed message. Please try again.');
                });
            }

            function processExtraction() {
                showLoading('Extracting Message', 'Analyzing the image for hidden messages...');
                
                const formData = new FormData();
                formData.append('image', extractImage);
                
                fetch('/extract_message', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    hideLoading();
                    if (data.success) {
                        showResults({
                            type: 'extract',
                            image: extractImage,
                            extractedMessage: data.extracted_message,
                            success: true,
                            messageLength: data.message_length,
                            imageSize: data.image_size,
                            extractionMethod: data.extraction_method,
                            sourceFilename: data.source_filename
                        });
                    } else {
                        alert('Error: ' + (data.error || 'Failed to extract message'));
                    }
                })
                .catch(error => {
                    hideLoading();
                    console.error('Error:', error);
                    alert('Error: Failed to extract message. Please try again.');
                });
            }

            function showLoading(title, subtitle) {
                document.getElementById('loadingText').textContent = title;
                document.getElementById('loadingSubtext').textContent = subtitle;
                loadingOverlay.style.display = 'flex';
            }

            function hideLoading() {
                loadingOverlay.style.display = 'none';
            }

            function showResults(data) {
                const resultsTitle = document.getElementById('resultsTitle');
                const resultsContent = document.getElementById('resultsContent');
                const downloadBtn = document.getElementById('downloadBtn');

                if (data.type === 'embed') {
                    resultsTitle.textContent = 'Message Embedded Successfully';
                    resultsContent.innerHTML = `
                        <div style="text-align: center;">
                            <div style="background: var(--bg-glass); padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem;">
                                <i class="fas fa-check-circle" style="font-size: 3rem; color: var(--success); margin-bottom: 1rem;"></i>
                                <h3>Steganography Complete!</h3>
                                <p style="color: var(--text-secondary); margin-top: 0.5rem;">Your secret message has been successfully hidden in the image.</p>
                            </div>
                            <div style="background: var(--bg-glass); padding: 1rem; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.875rem;">
                                <strong>Message Characters:</strong> ${data.messageLength || data.message.length}<br>
                                <strong>Original Image:</strong> ${data.originalImage.name}<br>
                                <strong>Output Filename:</strong> ${data.filename}<br>
                                <strong>Encoding Method:</strong> ${data.encodingMethod}<br>
                                <strong>Capacity Used:</strong> ${data.capacityUsed}%
                            </div>
                        </div>
                    `;
                    downloadBtn.innerHTML = '<i class="fas fa-download"></i><span>Download Stego Image</span>';
                    downloadBtn.onclick = () => downloadStegoImage(data.stegoImage, data.filename);
                } else {
                    resultsTitle.textContent = 'Message Extracted Successfully';
                    resultsContent.innerHTML = `
                        <div>
                            <div style="background: var(--bg-glass); padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; text-align: center;">
                                <i class="fas fa-search" style="font-size: 3rem; color: var(--success); margin-bottom: 1rem;"></i>
                                <h3>Hidden Message Found!</h3>
                                <p style="color: var(--text-secondary); margin-top: 0.5rem;">Successfully extracted the hidden message from the image.</p>
                            </div>
                            <div style="background: var(--bg-glass); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                <strong style="color: var(--primary);">Extracted Message:</strong>
                            </div>
                            <div class="extracted-message">${data.extractedMessage}</div>
                            <div style="background: var(--bg-glass); padding: 1rem; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.875rem; margin-top: 1rem;">
                                <strong>Message Length:</strong> ${data.messageLength || data.extractedMessage.length} characters<br>
                                <strong>Source Image:</strong> ${data.sourceFilename || data.image.name}<br>
                                <strong>Extraction Method:</strong> ${data.extractionMethod}<br>
                                <strong>Image Size:</strong> ${data.imageSize}
                            </div>
                        </div>
                    `;
                    downloadBtn.innerHTML = '<i class="fas fa-download"></i><span>Download Message</span>';
                    downloadBtn.onclick = () => downloadMessage(data.extractedMessage);
                }

                resultsContainer.style.display = 'block';
                resultsContainer.scrollIntoView({ behavior: 'smooth' });
            }

            function downloadStegoImage(base64Data, filename) {
                try {
                    // Convert base64 to blob
                    const byteCharacters = atob(base64Data);
                    const byteNumbers = new Array(byteCharacters.length);
                    for (let i = 0; i < byteCharacters.length; i++) {
                        byteNumbers[i] = byteCharacters.charCodeAt(i);
                    }
                    const byteArray = new Uint8Array(byteNumbers);
                    const blob = new Blob([byteArray], { type: 'image/png' });
                    
                    // Create download link
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename || 'stego_image.png';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                } catch (error) {
                    console.error('Error downloading image:', error);
                    alert('Error downloading image. Please try again.');
                }
            }

            function downloadMessage(message) {
                try {
                    const blob = new Blob([message], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'extracted_message.txt';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                } catch (error) {
                    console.error('Error downloading message:', error);
                    alert('Error downloading message. Please try again.');
                }
            }

            // Audio steganography functions
            function updateAudioUploadZone(zone, file) {
                const text = zone.querySelector('.upload-text');
                const subtext = zone.querySelector('.upload-subtext');
                const icon = zone.querySelector('.upload-icon i');
                
                text.textContent = file.name;
                subtext.textContent = `${(file.size / 1024).toFixed(1)} KB`;
                icon.className = 'fas fa-check-circle';
                zone.style.borderColor = '#9b59b6';
                zone.style.background = 'rgba(155, 89, 182, 0.1)';
            }

            function resetAudioUploadZone(zone, textContent, subtextContent) {
                const text = zone.querySelector('.upload-text');
                const subtext = zone.querySelector('.upload-subtext');
                const icon = zone.querySelector('.upload-icon i');
                
                text.textContent = textContent;
                subtext.textContent = subtextContent;
                icon.className = zone.id === 'embedAudioUploadZone' ? 'fas fa-volume-up' : 'fas fa-file-audio';
                zone.style.borderColor = '';
                zone.style.background = '';
            }

            function processAudioEmbedding() {
                showLoading('Embedding Message', 'Processing your audio file and hiding the secret message...');
                
                const formData = new FormData();
                formData.append('audio', embedAudio);
                formData.append('message', secretAudioMessage.value);
                
                fetch('/embed_audio_message', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    hideLoading();
                    if (data.success) {
                        showAudioResults({
                            type: 'embed',
                            originalAudio: embedAudio,
                            message: secretAudioMessage.value,
                            success: true,
                            stegoAudio: data.stego_audio,
                            filename: data.filename,
                            originalSize: data.original_size,
                            messageLength: data.message_length,
                            capacityUsed: data.capacity_used,
                            encodingMethod: data.encoding_method,
                            sampleRate: data.sample_rate,
                            duration: data.duration
                        });
                    } else {
                        alert('Error: ' + (data.error || 'Failed to embed message in audio'));
                    }
                })
                .catch(error => {
                    hideLoading();
                    console.error('Error:', error);
                    alert('Error: Failed to embed message in audio. Please try again.');
                });
            }

            function processAudioExtraction() {
                showLoading('Extracting Message', 'Analyzing the audio file for hidden messages...');
                
                const formData = new FormData();
                formData.append('audio', extractAudio);
                
                fetch('/extract_audio_message', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    hideLoading();
                    if (data.success) {
                        showAudioResults({
                            type: 'extract',
                            audio: extractAudio,
                            extractedMessage: data.extracted_message,
                            success: true,
                            messageLength: data.message_length,
                            audioSize: data.audio_size,
                            extractionMethod: data.extraction_method,
                            sourceFilename: data.source_filename,
                            sampleRate: data.sample_rate,
                            duration: data.duration
                        });
                    } else {
                        alert('Error: ' + (data.error || 'Failed to extract message from audio'));
                    }
                })
                .catch(error => {
                    hideLoading();
                    console.error('Error:', error);
                    alert('Error: Failed to extract message from audio. Please try again.');
                });
            }

            function showAudioResults(data) {
                const resultsTitle = document.getElementById('resultsTitle');
                const resultsContent = document.getElementById('resultsContent');
                const downloadBtn = document.getElementById('downloadBtn');

                if (data.type === 'embed') {
                    resultsTitle.textContent = 'Message Embedded Successfully';
                    resultsContent.innerHTML = `
                        <div style=\"text-align: center;\">
                            <div style=\"background: var(--bg-glass); padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem;\">
                                <i class=\"fas fa-check-circle\" style=\"font-size: 3rem; color: var(--success); margin-bottom: 1rem;\"></i>
                                <h3>Audio Steganography Complete!</h3>
                                <p style=\"color: var(--text-secondary); margin-top: 0.5rem;\">Your secret message has been successfully hidden in the audio file.</p>
                            </div>
                            <div style=\"background: var(--bg-glass); padding: 1rem; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.875rem;\">
                                <strong>Message Characters:</strong> ${data.messageLength || data.message.length}<br>
                                <strong>Original Audio:</strong> ${data.originalAudio.name}<br>
                                <strong>Output Filename:</strong> ${data.filename}<br>
                                <strong>Encoding Method:</strong> ${data.encodingMethod}<br>
                                <strong>Sample Rate:</strong> ${data.sampleRate} Hz<br>
                                <strong>Duration:</strong> ${data.duration} seconds<br>
                                <strong>Capacity Used:</strong> ${data.capacityUsed}%
                            </div>
                        </div>
                    `;
                    downloadBtn.innerHTML = '<i class=\"fas fa-download\"></i><span>Download Stego Audio</span>';
                    downloadBtn.onclick = () => downloadStegoAudio(data.stegoAudio, data.filename);
                } else {
                    resultsTitle.textContent = 'Message Extracted Successfully';
                    resultsContent.innerHTML = `
                        <div>
                            <div style=\"background: var(--bg-glass); padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; text-align: center;\">
                                <i class=\"fas fa-search\" style=\"font-size: 3rem; color: var(--success); margin-bottom: 1rem;\"></i>
                                <h3>Hidden Message Found!</h3>
                                <p style=\"color: var(--text-secondary); margin-top: 0.5rem;\">Successfully extracted the hidden message from the audio file.</p>
                            </div>
                            <div style=\"background: var(--bg-glass); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;\">
                                <strong style=\"color: var(--primary);\">Extracted Message:</strong>
                            </div>
                            <div class=\"extracted-message\">${data.extractedMessage}</div>
                            <div style=\"background: var(--bg-glass); padding: 1rem; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.875rem; margin-top: 1rem;\">
                                <strong>Message Length:</strong> ${data.messageLength || data.extractedMessage.length} characters<br>
                                <strong>Source Audio:</strong> ${data.sourceFilename || data.audio.name}<br>
                                <strong>Extraction Method:</strong> ${data.extractionMethod}<br>
                                <strong>Audio Size:</strong> ${data.audioSize}<br>
                                <strong>Sample Rate:</strong> ${data.sampleRate} Hz<br>
                                <strong>Duration:</strong> ${data.duration} seconds
                            </div>
                        </div>
                    `;
                    downloadBtn.innerHTML = '<i class=\"fas fa-download\"></i><span>Download Message</span>';
                    downloadBtn.onclick = () => downloadMessage(data.extractedMessage);
                }

                resultsContainer.style.display = 'block';
                resultsContainer.scrollIntoView({ behavior: 'smooth' });
            }

            function downloadStegoAudio(base64Data, filename) {
                try {
                    // Convert base64 to blob
                    const byteCharacters = atob(base64Data);
                    const byteNumbers = new Array(byteCharacters.length);
                    for (let i = 0; i < byteCharacters.length; i++) {
                        byteNumbers[i] = byteCharacters.charCodeAt(i);
                    }
                    const byteArray = new Uint8Array(byteNumbers);
                    const blob = new Blob([byteArray], { type: 'audio/wav' });
                    
                    // Create download link
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename || 'stego_audio.wav';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                } catch (error) {
                    console.error('Error downloading audio:', error);
                    alert('Error downloading audio. Please try again.');
                }
            }
        }
    </script>
</body>
</html>

