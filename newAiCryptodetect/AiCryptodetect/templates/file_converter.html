<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Converter - AI CryptoDetect</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00d4ff;
            --primary-dark: #0099cc;
            --secondary: #ff6b6b;
            --accent: #4ecdc4;
            --warning: #ffe66d;
            --success: #06ffa5;
            --error: #ff4757;
            --bg-primary: #0a0a0f;
            --bg-secondary: #1a1a24;
            --bg-tertiary: #2a2a3a;
            --bg-glass: rgba(255, 255, 255, 0.05);
            --bg-glass-strong: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: #b4b4b4;
            --text-muted: #666666;
            --border-glass: rgba(255, 255, 255, 0.1);
            --shadow-glow: 0 0 30px rgba(0, 212, 255, 0.3);
            --shadow-strong: 0 20px 40px rgba(0, 0, 0, 0.6);
            --gradient-primary: linear-gradient(135deg, #00d4ff 0%, #4ecdc4 100%);
            --gradient-secondary: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            --gradient-bg: linear-gradient(135deg, #0a0a0f 0%, #1a1a24 100%);
            --gradient-card: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
        }

        /* Light theme variables */
        body.light-theme {
            --primary: #0099cc;
            --primary-dark: #007acc;
            --secondary: #e74c3c;
            --accent: #2ecc71;
            --warning: #f39c12;
            --success: #27ae60;
            --error: #e74c3c;
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e9ecef;
            --bg-glass: rgba(0, 0, 0, 0.05);
            --bg-glass-strong: rgba(0, 0, 0, 0.1);
            --text-primary: #2c3e50;
            --text-secondary: #6c757d;
            --text-muted: #adb5bd;
            --border-glass: rgba(0, 0, 0, 0.1);
            --shadow-glow: 0 0 30px rgba(0, 153, 204, 0.3);
            --shadow-strong: 0 20px 40px rgba(0, 0, 0, 0.1);
            --gradient-primary: linear-gradient(135deg, #0099cc 0%, #2ecc71 100%);
            --gradient-secondary: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            --gradient-bg: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            --gradient-card: linear-gradient(135deg, rgba(0,0,0,0.02) 0%, rgba(0,0,0,0.05) 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--gradient-bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }

        /* Header styles (same as other pages) */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 15, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-glass);
            z-index: 1000;
            padding: 1rem 0;
            transition: all 0.3s ease;
        }

        body.light-theme .header {
            background: rgba(248, 249, 250, 0.8);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .logo span {
            background: linear-gradient(135deg, #06ffa5 0%, #2ecc71 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 20px rgba(6, 255, 165, 0.3);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: #2ecc71;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
            margin-right: auto;
            margin-left: 2rem;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .nav-link.active {
            color: var(--success);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(135deg, #06ffa5 0%, #2ecc71 100%);
        }

        .nav-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .theme-toggle {
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            color: var(--text-primary);
            padding: 0.75rem 1.25rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            position: relative;
            overflow: hidden;
            min-width: 120px;
            justify-content: center;
        }

        .theme-toggle:hover {
            background: var(--bg-glass-strong);
            box-shadow: var(--shadow-glow);
            transform: translateY(-2px);
        }

        /* AI Status Indicator */
        .ai-status {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            border-radius: 50px;
            padding: 0.75rem 1.25rem;
            backdrop-filter: blur(15px);
            font-weight: 500;
            font-size: 0.875rem;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .ai-status:hover {
            background: var(--bg-glass-strong);
            transform: translateY(-1px);
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            position: relative;
            background: var(--success);
            box-shadow: 
                0 0 10px rgba(6, 255, 165, 0.5),
                inset 0 1px 1px rgba(255, 255, 255, 0.3);
        }

        .status-indicator.online {
            background: var(--success);
            animation: pulse-green 2s infinite;
        }

        .status-indicator.offline {
            background: var(--error);
            animation: pulse-red 2s infinite;
        }

        @keyframes pulse-green {
            0% {
                box-shadow: 0 0 0 0 rgba(6, 255, 165, 0.7);
            }
            70% {
                box-shadow: 0 0 0 4px rgba(6, 255, 165, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(6, 255, 165, 0);
            }
        }

        @keyframes pulse-red {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7);
            }
            70% {
                box-shadow: 0 0 0 4px rgba(255, 71, 87, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 71, 87, 0);
            }
        }

        /* Main Content */
        .main-container {
            margin-top: 80px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 2rem;
        }

        .hero {
            text-align: center;
            padding: 4rem 0 3rem;
            position: relative;
        }

        .hero-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #06ffa5 0%, #2ecc71 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 30px rgba(6, 255, 165, 0.5));
            text-shadow: 0 0 40px rgba(6, 255, 165, 0.3);
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto 2rem;
            font-weight: 300;
        }

        /* Converter Interface */
        .converter-interface {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .converter-card {
            background: var(--gradient-card);
            border: 1px solid var(--border-glass);
            border-radius: 24px;
            padding: 2rem;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .converter-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-strong);
            border-color: var(--success);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            background: linear-gradient(135deg, #06ffa5 0%, #2ecc71 100%);
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .card-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Upload Zone */
        .upload-zone {
            border: 2px dashed var(--border-glass);
            border-radius: 16px;
            padding: 3rem 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            background: rgba(6, 255, 165, 0.02);
        }

        .upload-zone:hover,
        .upload-zone.drag-over {
            border-color: var(--success);
            background: rgba(6, 255, 165, 0.08);
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--success);
            margin-bottom: 1rem;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .upload-text {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .upload-subtext {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Format Selection */
        .format-selection {
            margin-top: 2rem;
        }

        .format-label {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .format-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
        }

        .format-option {
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .format-option:hover {
            background: var(--bg-glass-strong);
            border-color: var(--success);
            transform: translateY(-2px);
        }

        .format-option.selected {
            background: rgba(6, 255, 165, 0.1);
            border-color: var(--success);
            color: var(--success);
        }

        .format-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .format-name {
            font-size: 0.875rem;
            font-weight: 500;
        }

        /* Convert Button */
        .convert-btn {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #06ffa5 0%, #2ecc71 100%);
            color: white;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 2rem;
        }

        .convert-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(6, 255, 165, 0.3);
        }

        .convert-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Results Area */
        .results-area {
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            border-radius: 16px;
            padding: 2rem;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .results-empty {
            color: var(--text-secondary);
        }

        .results-content {
            width: 100%;
        }

        .result-file {
            background: var(--bg-glass);
            border: 1px solid var(--border-glass);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .file-icon {
            width: 40px;
            height: 40px;
            background: var(--success);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .file-details h4 {
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .file-details p {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .download-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .download-btn:hover {
            background: #27ae60;
            transform: translateY(-1px);
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 4rem;
        }

        .feature-card {
            background: var(--gradient-card);
            border: 1px solid var(--border-glass);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-strong);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #06ffa5 0%, #2ecc71 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin: 0 auto 1rem;
        }

        .feature-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .feature-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Loading State */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            color: var(--success);
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-glass);
            border-top: 2px solid var(--success);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .converter-interface {
                grid-template-columns: 1fr;
            }
            
            .main-container {
                padding: 1rem;
            }
            
            .converter-card {
                padding: 1.5rem;
            }

            .nav-links {
                display: none;
            }
        }

        /* Alert Messages */
        .alert {
            padding: 1rem 1.5rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            font-weight: 500;
            border: 1px solid;
            backdrop-filter: blur(10px);
        }

        .alert-success {
            background: rgba(6, 255, 165, 0.1);
            color: var(--success);
            border-color: var(--success);
        }

        .alert-error {
            background: rgba(255, 71, 87, 0.1);
            color: var(--error);
            border-color: var(--error);
        }

        .alert-warning {
            background: rgba(255, 230, 109, 0.1);
            color: var(--warning);
            border-color: var(--warning);
        }

        /* Animation Classes */
        .fade-in-up {
            animation: fadeInUp 0.8s ease-out;
        }

        .slide-in-right {
            animation: slideInRight 0.8s ease-out;
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <span>AI CryptoDetect</span>
            </div>
            
            <div class="nav-links">
                <a href="/" class="nav-link">Home</a>
                <a href="/encrypt" class="nav-link">File Encryption</a>
                <a href="/compare" class="nav-link">Compare Algorithms</a>
                <a href="/steganography" class="nav-link">Steganography</a>
                <a href="/file-converter" class="nav-link active">File Converter</a>
            </div>
            
            <div class="nav-controls">
                <div class="ai-status" id="aiStatus">
                    <div class="status-indicator online"></div>
                    <span>AI Online</span>
                </div>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                    <span>Dark Mode</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="main-container">
        <!-- Hero Section -->
        <section class="hero fade-in-up">
            <h1 class="hero-title">Simple File Converter</h1>
            <p class="hero-subtitle">Our Simple File Converter lets you easily switch between popular formats like TXT to PDF, PNG to JPG, and more — all within a privacy-focused environment. Designed for everyday users who value simplicity and safety, this tool ensures your files are processed locally or securely, with no data tracking. Whether you're a student, professional, or just organizing your documents, convert your files in seconds without worrying about file leaks or complicated steps. Just upload, convert, and download — it's that easy.</p>
        </section>

        <!-- Converter Interface -->
        <section class="converter-interface slide-in-right">
            <!-- Upload Card -->
            <div class="converter-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-file-upload"></i>
                    </div>
                    <div>
                        <h3 class="card-title">Upload File</h3>
                        <p class="card-description">Select the file you want to convert</p>
                    </div>
                </div>

                <div class="upload-zone" id="uploadZone">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <div class="upload-text">Drop your file here</div>
                    <div class="upload-subtext">or click to browse</div>
                    <input type="file" id="fileInput" style="display: none;">
                </div>

                <div class="format-selection" id="outputFormatSection" style="display: none;">
                    <div class="format-label">Convert to:</div>
                    <div class="format-grid" id="formatGrid">
                        <!-- Format options will be populated based on input file -->
                    </div>
                </div>

                <button class="convert-btn" id="convertBtn" disabled>
                    <i class="fas fa-magic"></i>
                    <span>Convert File</span>
                </button>
            </div>

            <!-- Results Card -->
            <div class="converter-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-download"></i>
                    </div>
                    <div>
                        <h3 class="card-title">Download Results</h3>
                        <p class="card-description">Your converted files will appear here</p>
                    </div>
                </div>

                <div class="results-area" id="resultsArea">
                    <div class="results-empty">
                        <i class="fas fa-file-export" style="font-size: 3rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
                        <p>No conversions yet. Upload a file to get started!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Grid -->
        <section class="features-grid fade-in">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3 class="feature-title">Privacy Focused</h3>
                <p class="feature-description">All conversions are processed securely with no data tracking or storage. Your files remain private and are automatically deleted after conversion.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <h3 class="feature-title">Lightning Fast</h3>
                <p class="feature-description">Convert your files in seconds with our optimized processing engine. No waiting, no queues - just instant results.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-layer-group"></i>
                </div>
                <h3 class="feature-title">Multiple Formats</h3>
                <p class="feature-description">Support for popular formats including PDF, DOCX, TXT, PNG, JPG, MP3, MP4, and many more. Convert between any supported formats.</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h3 class="feature-title">Works Everywhere</h3>
                <p class="feature-description">Use on any device - desktop, tablet, or mobile. No software installation required, just open and convert in your browser.</p>
            </div>
        </section>
    </div>

    <script>
        // Theme toggle functionality
        document.addEventListener('DOMContentLoaded', () => {
            initializeThemeToggle();
        });

        function initializeThemeToggle() {
            const themeToggle = document.getElementById('themeToggle');
            
            // Load saved theme
            const savedTheme = localStorage.getItem('theme') || 'dark';
            applyTheme(savedTheme);
            
            // Theme toggle click handler
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.body.classList.contains('light-theme') ? 'light' : 'dark';
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                applyTheme(newTheme);
                localStorage.setItem('theme', newTheme);
            });
            
            function applyTheme(theme) {
                const themeIcon = themeToggle.querySelector('i');
                const themeText = themeToggle.querySelector('span');
                
                if (theme === 'light') {
                    document.body.classList.add('light-theme');
                    themeIcon.className = 'fas fa-sun';
                    themeText.textContent = 'Light Mode';
                } else {
                    document.body.classList.remove('light-theme');
                    themeIcon.className = 'fas fa-moon';
                    themeText.textContent = 'Dark Mode';
                }
            }
        }

        // File conversion functionality
        const uploadZone = document.getElementById('uploadZone');
        const fileInput = document.getElementById('fileInput');
        const outputFormatSection = document.getElementById('outputFormatSection');
        const formatGrid = document.getElementById('formatGrid');
        const convertBtn = document.getElementById('convertBtn');
        const resultsArea = document.getElementById('resultsArea');

        let selectedFile = null;
        let selectedFormat = null;

        // Format mapping for different file types
        const formatMappings = {
            // Document formats
            'pdf': {
                name: 'PDF Document',
                icon: 'fas fa-file-pdf',
                outputs: ['txt', 'docx']
            },
            'txt': {
                name: 'Text File',
                icon: 'fas fa-file-alt',
                outputs: ['pdf', 'docx']
            },
            'docx': {
                name: 'Word Document',
                icon: 'fas fa-file-word',
                outputs: ['pdf', 'txt']
            },
            'doc': {
                name: 'Word Document',
                icon: 'fas fa-file-word',
                outputs: ['pdf', 'txt', 'docx']
            },
            
            // Image formats
            'jpg': {
                name: 'JPEG Image',
                icon: 'fas fa-image',
                outputs: ['png', 'gif', 'bmp', 'webp', 'pdf']
            },
            'jpeg': {
                name: 'JPEG Image',
                icon: 'fas fa-image',
                outputs: ['png', 'gif', 'bmp', 'webp', 'pdf']
            },
            'png': {
                name: 'PNG Image',
                icon: 'fas fa-image',
                outputs: ['jpg', 'gif', 'bmp', 'webp', 'pdf']
            },
            'gif': {
                name: 'GIF Image',
                icon: 'fas fa-image',
                outputs: ['png', 'jpg', 'bmp', 'webp']
            },
            'bmp': {
                name: 'Bitmap Image',
                icon: 'fas fa-image',
                outputs: ['png', 'jpg', 'gif', 'webp']
            },
            'webp': {
                name: 'WebP Image',
                icon: 'fas fa-image',
                outputs: ['png', 'jpg', 'gif', 'bmp']
            },
            
            // Audio formats
            'mp3': {
                name: 'MP3 Audio',
                icon: 'fas fa-music',
                outputs: ['wav', 'ogg', 'aac', 'm4a']
            },
            'wav': {
                name: 'WAV Audio',
                icon: 'fas fa-music',
                outputs: ['mp3', 'ogg', 'aac', 'm4a']
            },
            'ogg': {
                name: 'OGG Audio',
                icon: 'fas fa-music',
                outputs: ['mp3', 'wav', 'aac', 'm4a']
            },
            'aac': {
                name: 'AAC Audio',
                icon: 'fas fa-music',
                outputs: ['mp3', 'wav', 'ogg', 'm4a']
            },
            'm4a': {
                name: 'M4A Audio',
                icon: 'fas fa-music',
                outputs: ['mp3', 'wav', 'ogg', 'aac']
            },
            
            // Video formats
            'mp4': {
                name: 'MP4 Video',
                icon: 'fas fa-video',
                outputs: ['avi', 'mkv', 'mov', 'wmv']
            },
            'avi': {
                name: 'AVI Video',
                icon: 'fas fa-video',
                outputs: ['mp4', 'mkv', 'mov', 'wmv']
            },
            'mkv': {
                name: 'MKV Video',
                icon: 'fas fa-video',
                outputs: ['mp4', 'avi', 'mov', 'wmv']
            },
            'mov': {
                name: 'QuickTime Video',
                icon: 'fas fa-video',
                outputs: ['mp4', 'avi', 'mkv', 'wmv']
            },
            'wmv': {
                name: 'WMV Video',
                icon: 'fas fa-video',
                outputs: ['mp4', 'avi', 'mkv', 'mov']
            }
        };

        // Upload zone events
        uploadZone.addEventListener('click', () => fileInput.click());
        
        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.classList.add('drag-over');
        });

        uploadZone.addEventListener('dragleave', () => {
            uploadZone.classList.remove('drag-over');
        });

        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.classList.remove('drag-over');
            handleFile(e.dataTransfer.files[0]);
        });

        fileInput.addEventListener('change', (e) => {
            handleFile(e.target.files[0]);
        });

        function handleFile(file) {
            if (!file) return;

            selectedFile = file;
            const fileExtension = file.name.split('.').pop().toLowerCase();
            
            // Update upload zone display
            uploadZone.innerHTML = `
                <div class="upload-icon">
                    <i class="fas fa-file-check" style="color: var(--success);"></i>
                </div>
                <div class="upload-text">File Selected</div>
                <div class="upload-subtext">${file.name} (${formatFileSize(file.size)})</div>
            `;

            // Show format selection
            populateFormatOptions(fileExtension);
            outputFormatSection.style.display = 'block';
        }

        function populateFormatOptions(inputFormat) {
            const mapping = formatMappings[inputFormat];
            if (!mapping) {
                showAlert('Unsupported file format. Please try a different file.', 'error');
                return;
            }

            formatGrid.innerHTML = '';
            mapping.outputs.forEach(format => {
                const option = document.createElement('div');
                option.className = 'format-option';
                option.dataset.format = format;
                
                const formatInfo = formatMappings[format] || { name: format.toUpperCase(), icon: 'fas fa-file' };
                
                option.innerHTML = `
                    <div class="format-icon">
                        <i class="${formatInfo.icon}"></i>
                    </div>
                    <div class="format-name">${format.toUpperCase()}</div>
                `;

                option.addEventListener('click', () => selectFormat(format, option));
                formatGrid.appendChild(option);
            });
        }

        function selectFormat(format, element) {
            // Remove previous selection
            document.querySelectorAll('.format-option').forEach(el => el.classList.remove('selected'));
            
            // Select current format
            element.classList.add('selected');
            selectedFormat = format;
            convertBtn.disabled = false;
        }

        convertBtn.addEventListener('click', () => {
            if (!selectedFile || !selectedFormat) return;
            
            convertFile(selectedFile, selectedFormat);
        });

        function convertFile(file, targetFormat) {
            // Show loading state
            convertBtn.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <span>Converting...</span>
                </div>
            `;
            convertBtn.disabled = true;

            // Create FormData for file upload
            const formData = new FormData();
            formData.append('file', file);
            formData.append('format', targetFormat);

            // Send request to backend
            fetch('/convert_file', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showConversionResult(data.filename, targetFormat, data.data, data.size);
                    showAlert('File converted successfully!', 'success');
                } else {
                    showAlert(data.error || 'Conversion failed', 'error');
                }
            })
            .catch(error => {
                console.error('Conversion error:', error);
                showAlert('Conversion failed: Network error', 'error');
            })
            .finally(() => {
                // Reset convert button
                convertBtn.innerHTML = `
                    <i class="fas fa-magic"></i>
                    <span>Convert File</span>
                `;
                convertBtn.disabled = false;
            });
        }

        function showConversionResult(fileName, format, fileData, fileSize) {
            const formatInfo = formatMappings[format] || { name: format.toUpperCase(), icon: 'fas fa-file' };
            
            resultsArea.innerHTML = `
                <div class="results-content">
                    <div class="result-file">
                        <div class="file-info">
                            <div class="file-icon">
                                <i class="${formatInfo.icon}"></i>
                            </div>
                            <div class="file-details">
                                <h4>${fileName}</h4>
                                <p>${formatInfo.name} • ${formatFileSize(fileSize)} • Ready for download</p>
                            </div>
                        </div>
                        <button class="download-btn" onclick="downloadFile('${fileName}', '${fileData}')">
                            <i class="fas fa-download"></i> Download
                        </button>
                    </div>
                </div>
            `;
        }

        function downloadFile(fileName, fileData) {
            try {
                // Convert base64 to blob
                const byteCharacters = atob(fileData);
                const byteNumbers = new Array(byteCharacters.length);
                for (let i = 0; i < byteCharacters.length; i++) {
                    byteNumbers[i] = byteCharacters.charCodeAt(i);
                }
                const byteArray = new Uint8Array(byteNumbers);
                const blob = new Blob([byteArray]);
                
                // Create download link
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.style.display = 'none';
                a.href = url;
                a.download = fileName;
                
                // Trigger download
                document.body.appendChild(a);
                a.click();
                
                // Clean up
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);
                
                showAlert(`Download started for ${fileName}`, 'success');
            } catch (error) {
                console.error('Download error:', error);
                showAlert('Download failed', 'error');
            }
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check' : type === 'warning' ? 'exclamation-triangle' : 'times'}"></i>
                <span>${message}</span>
            `;
            
            document.querySelector('.main-container').insertBefore(alertDiv, document.querySelector('.converter-interface'));
            
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }
    </script>
</body>
</html>
